<html>
<head>
    <title>QR POC</title>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
</head>
<body>
    <h1>QR Code Generator</h1>
    <div>
        Inhalt:
        <input type="text" name="Inhalt" id="content">
    </div>
    </br>
    <div>
        Correction Level:
        <input type="radio" id="low" name="correctionLevel" value="L" checked>
        <label for="low">low</label>

        <input type="radio" id="medium" name="correctionLevel" value="M">
        <label for="medium">medium</label>

        <input type="radio" id="quartile" name="correctionLevel" value="Q">
        <label for="quartile">quartile</label>

        <input type="radio" id="high" name="correctionLevel" value="H">
        <label for="high">high</label>
    </div>
    </br>
    <div>
        Logo:
        <input type="file" id="logo">
    </div>
    </br>
    <button onclick="generateQR()">Generate</button>

    
    <canvas id="qrcanvas" width="256" height="256"></canvas>
    
    <script type="text/javascript">
        function generateQR() {
            document.getElementById("qrcode")
            var canvas = getElementById("qrcanvas")
            var context = canvas.getContext("2d");
            context.clearRect(0, 0, canvas.width, canvas.height);
            
            //const qrcanvas = canvas.getContext("qrcode");
            //qrcanvas.clearRect(0, 0, canvas.width, canvas.height);
            
            let content = document.querySelector("#content").value;

            var correctionLevel;
            var factor;
            const checkboxes = document.querySelectorAll('input[name="correctionLevel"]');
            const num = checkboxes.length;

            for (let i = 0; i < num; i++) {
                if (checkboxes[i].checked === true) {
                    correctionLevel = checkboxes[i].value;
                    console.log(correctionLevel);
                    break;
                }
            }
            
            switch (correctionLevel){
            case "L":
                var qrcode = new QRCode(document.getElementById("qrcode"), {
                text: content,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.L
                });
                factor = 15;
                break;
            case "M":
                var qrcode = new QRCode(document.getElementById("qrcode"), {
                text: content,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.M
                });
                factor = 10;
                break;
            case "Q":
                var qrcode = new QRCode(document.getElementById("qrcode"), {
                text: content,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.Q
                });
                factor = 4;
                break;
            case "H":
                var qrcode = new QRCode(document.getElementById("qrcode"), {
                text: content,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
                });
                factor = 3;
                break;
            }
            
            var elem = document.createElement("img");
            elem.setAttribute("src", getElementById("Download.png"));
            elem.setAttribute("height", document.getElementById("qrcode").height/factor);
            elem.setAttribute("width", document.getElementById("qrcode").width/factor);
            
            document.getElementById("qrcode").appendChild(elem);
        }
        //document.getElementById("qrcode").appendChild(elem);</script>
</body>
</html>
